defaults:
  - logging: logging_defaults
  - dataset: flow_matching_datasets

device: cuda:0
batch_size: 64
num_workers: 4
action_dim: 6
pred_horizon: 30
img_token_dim: 192
state_token_dim: 6
img_cond_len: 196
img_pos_embed_config: null
model_name: vit_tiny_patch16_224
trainable_layers: ["block.9", "block.10", "block.11", "norm"]
use_bf16: false

# Flow Matching config (replaces dp_config)
fm_config:
  depth: 8
  num_heads: 8
  hidden_size: 512
  img_adaptor: mlp2x_gelu
  state_adaptor: mlp3x_gelu
  action_adaptor: mlp3x_gelu
  # Flow matching specific parameters
  num_inference_timesteps: 10  # Number of Euler steps for ODE integration
  sigma_min: 1e-4

trainer:
  learning_rate: 1e-4
  weight_decay: 0.01
  betas: [0.9, 0.999]
  adam_epsilon: 1e-8
  max_grad_norm: 1.0
  use_amp: false

  lr_scheduler: cosine
  warmup_ratio: 0.05
  min_lr_ratio: 0.1
  policy_ema:
    update_after_step: 0
    inv_gamma: 1.0
    power: 0.75
    min_value: 0.0
    max_value: 0.9999
  vision_encoder_ema:
    update_after_step: 0
    inv_gamma: 1.0
    power: 0.75
    min_value: 0.0
    max_value: 0.9999

max_epochs: 100
seed: 42
eval_every_n_epochs: 10
log_every_n_step: 100
load_ckpt_path: ""
ckpt_path: "./checkpoints"
save_every_n_epoch: 10
